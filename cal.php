<?php 
//¸ßË¹µÄÁÐÖ÷ÏûÔª
function gauss($a,$n){
	//echo "$n";
	for($i = 1;$i <= $n - 1;$i ++){
		$p = $i;
		//echo "i = ".$i;
		for($j = $i + 1;$j <= $n;$j ++){
			if(abs($a[$j][$i]) > abs($a[$p][$i]))$p = $j;
		}
		for($k = $i;$k <= $n + 1;$k ++){
			$m = $a[$i][$k];
			$a[$i][$k] = $a[$p][$k];
			$a[$p][$k] = $m;
		}
		for ($j = $i + 1; $j <= $n; $j++){
		    $temp = $a[$j][$i] / $a[$i][$i];
		    //echo $temp + "\n";
			for ($k = $i; $k <= $n + 1; $k++){
				//echo "k = ".$k;
				$a[$j][$k] = $a[$j][$k] - $a[$i][$k] * $temp;
			}
		}
	}
	$b = array(105);
	for ($i = $n; $i >= 1; $i--){
		//echo "i = ".$i." a = ".$a[$i][$n + 1];
		for ($p = $n; $p > $i; $p--){
			$a[$i][$n + 1] = $a[$i][$n + 1] - $b[$p] * $a[$i][$p];
		}
		$b[$i] = $a[$i][$n + 1] / $a[$i][$i];
	}
	//print_r($b);
	return $b;
}
//×·¸Ï·¨
function zhui($a,$b,$c,$f,$n){
	$y = array(105);
	$x = array(105);
	$v = array(105);
	$u = $a[1];$v[1] = $b[1] / $u;$y[1] = $f[1] / $u;
	for($i = 2;$i <= $n;$i ++){
		$u = $a[$i] - $c[$i] * $v[$i - 1];
		$v[$i] = $b[$i] / $u;
		$y[$i] = ($f[$i] - $c[$i] * $y[$i - 1]) / $u;
	}
	$x[$n] = $y[$n];
	//$eps = 1e-11;
	for($k = $n - 1;$k >= 1;$k --){
		$x[$k] = $y[$k] - $v[$k] * $x[$k + 1];
		//if($x[$k] < $eps)$x[$k] = 0;
	}
	return $x;
}


function LU($A,$b,$n,&$L,&$U){
	$y = array(105);
	$x = array(105);
	for($i = 1;$i <= $n;$i ++){
       for($j = 1;$j <= $n;$j ++){
		   //echo $i;
           $L[$i][$j] = 0;
           $U[$i][$j] = 0;
	   }
       $L[$i][$i] = 1;
	}
   for($j = 1;$j <= $n;$j ++){
       $U[1][$j] = $A[1][$j];
   }
   for($i = 2;$i <= $n;$i ++){
       $L[$i][1] = $A[$i][1] / $U[1][1];
   }
   $s1=0;$s2=0;$s3=0;$s4=0;
   for($k = 2;$k <= $n;$k ++){
      $m = 1;
      for($j = $k;$j <= $n;$j ++){
         for($m = 1;$m <= $k - 1;$m ++){
            $s1 += $L[$k][$m] * $U[$m][$j];
		 }
         $U[$k][$j] = $A[$k][$j] - $s1;
         $s1 = 0;
	  }
      for($i = $k + 1;$i <= $n;$i ++){
         for($m = 1;$m <= $k - 1;$m ++){
            $s2 += $L[$i][$m] * $U[$m][$k];
		 }
         $L[$i][$k] = ($A[$i][$k] - $s2) / $U[$k][$k];
         $s2 = 0;
	  }
   }
   
   //cout<<"Êä³ö¾ØÕóUµÄÖµ"<<endl;
   /*echo "Umatrix:</br>";
   echo "<table border = '1'>";
   for($i = 1;$i <= $n;$i ++)
   {
   	  echo "<tr>"
      for($j = 1;$j <= $n;$j ++)
   {
         printf("<td> %.2lf </td>",$U[$i][$j]);
   }
      echo "</tr>";
   }
   echo "</table>";
  // cout<<"Êä³ö¾ØÕóLµÄÖµ"<<endl;
   echo "Lmatrix:</br>";
   //echo "<table>";
   for($i = 1;$i <= $n;$i ++)
   {
   	  //echo "<tr>";
      for($j = 1;$j <= $n;$j ++)
   {
         printf("<td>%.2lf</td>",$L[$i][$j]);
   }
      //echo "</tr>";
   }
   //echo "</table>";*/
   $y[1] = $b[1];
   //echo "y1 = ".$y[1]."</br>";
   for($i = 2;$i <= $n;$i ++){
      for($j = 1;$j <= $i - 1;$j ++){
         $s3 += $L[$i][$j] * $y[$j];
	  }
      $y[$i] = $b[$i] - $s3;
	  //echo "bi = ".$b[$i]." yi = ".$y[$i]."</br>";
      $s3 = 0;
   }
   $x[$n] = $y[$n] / $U[$n][$n];
   for($i = $n - 1;$i >= 1;$i --){
      for($j = $n;$j >= $i + 1;$j --){
         $s4 += $U[$i][$j] * $x[$j];
	  }
      $x[$i] = ($y[$i] - $s4) / $U[$i][$i];
      $s4 = 0;
   }
   return $x;
}


$A = array(
		1 => array(0,4,2,-3,-1,2,1,0,0,0,0,5),
		2 => array(0,8,6,-5,-3,6,5,0,1,0,0,12),
		3 => array(0,4,2,-2,-1,3,2,-1,0,3,1,3),
		4 => array(0,0,-2,1,5,-1,3,-1,1,9,4,2),
		5 => array(0,-4,2,6,-1,6,7,-3,3,2,3,3),
		6 => array(0,8,6,-8,5,7,17,2,6,-3,5,46),
		7 => array(0,0,2,-1,3,-4,2,5,3,0,1,13),
		8 => array(0,16,10,-11,-9,17,34,2,-1,2,2,38),
		9 => array(0,4,6,2,-7,13,9,2,0,12,4,19),
		10 => array(0,0,0,-1,8,-3,-24,-8,6,3,-1,-21)
		);
$la = array(
		1 => array(0,4,2,-3,-1,2,1,0,0,0,0),
		2 => array(0,8,6,-5,-3,6,5,0,1,0,0),
		3 => array(0,4,2,-2,-1,3,2,-1,0,3,1),
		4 => array(0,0,-2,1,5,-1,3,-1,1,9,4),
		5 => array(0,-4,2,6,-1,6,7,-3,3,2,3),
		6 => array(0,8,6,-8,5,7,17,2,6,-3,5),
		7 => array(0,0,2,-1,3,-4,2,5,3,0,1),
		8 => array(0,16,10,-11,-9,17,34,2,-1,2,2),
		9 => array(0,4,6,2,-7,13,9,2,0,12,4),
		10 => array(0,0,0,-1,8,-3,-24,-8,6,3,-1)
		);
$lb = array(0,5,12,3,2,3,46,13,38,19,-21);
$a = array(
		1 => array(0,4,2,-4,0,2,4,0,0),
		2 => array(0,2,2,-1,-2,1,3,2,0),
		3 => array(0,-4,-1,14,1,-8,-3,5,6),
		4 => array(0,0,-2,1,6,-1,-4,-3,3),
		5 => array(0,2,1,-8,-1,22,4,-10,-3),
		6 => array(0,4,3,-3,-4,4,11,1,-4),
		7 => array(0,0,2,5,-3,-10,1,14,2),
		8 => array(0,0,0,6,3,-3,-4,2,19)
		);
//print_r($a);
$b = array(0,0,-6,20,23,9,-22,-15,45);
$B = array(
		1 => array(0,4,2,-4,0,2,4,0,0,0),
		2 => array(0,2,2,-1,-2,1,3,2,0,-6),
		3 => array(0,-4,-1,14,1,-8,-3,5,6,20),
		4 => array(0,0,-2,1,6,-1,-4,-3,3,23),
		5 => array(0,2,1,-8,-1,22,4,-10,-3,9),
		6 => array(0,4,3,-3,-4,4,11,1,-4,-22),
		7 => array(0,0,2,5,-3,-10,1,14,2,-15),
		8 => array(0,0,0,6,3,-3,-4,2,19,45)
		);
$ta = array(0,4,4,4,4,4,4,4,4,4,4);
$tb = array(0,-1,-1,-1,-1,-1,-1,-1,-1,-1);
$tc = array(0,0,-1,-1,-1,-1,-1,-1,-1,-1,-1);
$tf = array(0,7,5,-13,2,6,-12,14,-4,5,-5);
//$res = zhui($ta,$tb,$tc,$tf,10);
//$ans = gauss($a, 8);
//$ret = LU($a,$b,8);
//print_r($ret);

?>
